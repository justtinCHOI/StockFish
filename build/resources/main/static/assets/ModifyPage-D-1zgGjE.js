import{r as n,b as z,j as e,d as A,R as G,e as o,f as a,h as l,E as y,i as E,k as S,l as R,m as M,B as H,n as J,q as K,s as N}from"./index-BKtiLFc2.js";import{u as O}from"./useCustomLogin-UzbsQ5sP.js";const Q={memberId:"",name:"",email:"",password:"",confirmPassword:""},U=()=>{const[s,j]=n.useState(Q),w=z(r=>r.loginSlice),[c,i]=n.useState(""),[u,p]=n.useState(""),[I,g]=n.useState(),[d,b]=n.useState(!1),[f,k]=n.useState(!1),{doLogout:v,moveToLogin:F}=O(),C=n.useRef(null),m=n.useRef(null),P=n.useRef(null),h=n.useRef(null);n.useEffect(()=>{j({...w})},[w]);const t=r=>{s[r.target.name]=r.target.value,j({...s}),r.target.name==="email"?L(r.target.value):r.target.name==="confirmPassword"&&B()},L=async r=>{try{const x=await K(r);i(x?"이미 사용 중인 이메일입니다.":"")}catch(x){console.error("이메일 중복 검사 중 오류가 발생했습니다.",x),i("이메일 중복 검사 중 오류가 발생했습니다.")}},B=()=>{s.password!==s.confirmPassword?p("비밀번호가 일치하지 않습니다."):p("")},D=()=>{if(!s.name){alert("이름을 입력해 주세요."),C.current.focus();return}if(!s.email){alert("이메일을 입력해 주세요."),m.current.focus();return}if(!s.password){alert("비밀번호를 입력해 주세요."),P.current.focus();return}if(!s.confirmPassword){alert("비밀번호를 입력해 주세요."),h.current.focus();return}if(c){alert("이메일을 확인해 주세요."),m.current.focus();return}if(u){alert("비밀번호가 일치하지 않습니다."),h.current.focus();return}N(s).then(r=>{console.log(r),g("Modified")})},q=()=>{g(null),v(),F()},T=()=>{b(!d)},W=()=>{k(!f)};return e.jsxs(e.Fragment,{children:[e.jsxs(A,{children:[I&&e.jsx(G,{title:"회원정보",content:"정보수정완료",callbackFn:q}),e.jsxs(o,{children:[e.jsx(a,{children:"이름"}),e.jsx(l,{name:"name",type:"text",value:s.name,onChange:t,ref:C})]}),e.jsxs(o,{children:[e.jsx(a,{children:"이메일"}),e.jsx(l,{name:"email",type:"email",value:s.email,onChange:t,ref:m}),c&&e.jsx(y,{children:c})]}),e.jsxs(o,{children:[e.jsx(a,{children:"비밀번호"}),e.jsxs(E,{children:[e.jsx(l,{name:"password",type:d?"text":"password",value:s.password,onChange:t,ref:P}),e.jsx(S,{onClick:T,children:d?e.jsx(R,{}):e.jsx(M,{})})]})]}),e.jsxs(o,{children:[e.jsx(a,{children:"비밀번호 재확인"}),e.jsxs(E,{children:[e.jsx(l,{name:"confirmPassword",type:f?"text":"password",value:s.confirmPassword,onChange:t,ref:h}),e.jsx(S,{onClick:W,children:f?e.jsx(R,{}):e.jsx(M,{})})]}),u&&e.jsx(y,{children:u})]}),e.jsx(o,{justify:"end",children:e.jsx(H,{type:"button",onClick:D,children:"Modify"})})]}),e.jsx(J,{})]})},Y=()=>e.jsx(U,{});export{Y as default};
