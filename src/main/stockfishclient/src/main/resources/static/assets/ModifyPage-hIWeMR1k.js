import{r as n,b as W,j as e,d as z,R as A,e as t,f as l,g as c,E as P,h as E,i as S,k as R,l as M,B as G,m as H,o as J,q as K}from"./index-DR66x2TL.js";import{u as N}from"./useCustomLogin-CjtSUxJM.js";const Q={memberId:"",name:"",email:"",password:"",confirmPassword:""},U=()=>{const[s,w]=n.useState(Q),j=W(r=>r.loginSlice),[i,d]=n.useState(""),[u,p]=n.useState(""),[b,g]=n.useState(),[m,I]=n.useState(!1),[f,k]=n.useState(!1),{doLogout:v,moveToLogin:F}=N(),C=n.useRef(null),h=n.useRef(null),y=n.useRef(null),x=n.useRef(null);n.useEffect(()=>{w({...j})},[j]);const a=r=>{s[r.target.name]=r.target.value,w({...s}),r.target.name==="email"?L(r.target.value):r.target.name==="confirmPassword"&&B()},L=async r=>{try{const o=await J(r);d(o?"이미 사용 중인 이메일입니다.":"")}catch(o){console.error("이메일 중복 검사 중 오류가 발생했습니다.",o),d("이메일 중복 검사 중 오류가 발생했습니다.")}},B=()=>{s.password!==s.confirmPassword?p("비밀번호가 일치하지 않습니다."):p("")},D=()=>{if(!s.name){alert("이름을 입력해 주세요."),C.current.focus();return}if(!s.email){alert("이메일을 입력해 주세요."),h.current.focus();return}if(!s.password){alert("비밀번호를 입력해 주세요."),y.current.focus();return}if(!s.confirmPassword){alert("비밀번호를 입력해 주세요."),x.current.focus();return}if(i){alert("이메일을 확인해 주세요."),h.current.focus();return}if(u){alert("비밀번호가 일치하지 않습니다."),x.current.focus();return}const r={memberId:s.memberId,name:s.name,email:s.email,password:s.password};K(r).then(o=>{console.log(o),g("Modified")})},T=()=>{g(null),v(),F()},q=()=>{I(!m)},O=()=>{k(!f)};return e.jsxs(e.Fragment,{children:[e.jsxs(z,{children:[b&&e.jsx(A,{title:"회원정보",content:"정보수정완료",callbackFn:T}),e.jsxs(t,{children:[e.jsx(l,{children:"이름"}),e.jsx(c,{name:"name",type:"text",value:s.name,onChange:a,ref:C})]}),e.jsxs(t,{children:[e.jsx(l,{children:"이메일"}),e.jsx(c,{name:"email",type:"email",value:s.email,onChange:a,ref:h}),i&&e.jsx(P,{children:i})]}),e.jsxs(t,{children:[e.jsx(l,{children:"비밀번호"}),e.jsxs(E,{children:[e.jsx(c,{name:"password",type:m?"text":"password",value:s.password,onChange:a,ref:y}),e.jsx(S,{onClick:q,children:m?e.jsx(R,{}):e.jsx(M,{})})]})]}),e.jsxs(t,{children:[e.jsx(l,{children:"비밀번호 재확인"}),e.jsxs(E,{children:[e.jsx(c,{name:"confirmPassword",type:f?"text":"password",onChange:a,ref:x}),e.jsx(S,{onClick:O,children:f?e.jsx(R,{}):e.jsx(M,{})})]}),u&&e.jsx(P,{children:u})]}),e.jsx(t,{justify:"end",children:e.jsx(G,{type:"button",onClick:D,children:"Modify"})})]}),e.jsx(H,{})]})},Y=()=>e.jsx(U,{});export{Y as default};
